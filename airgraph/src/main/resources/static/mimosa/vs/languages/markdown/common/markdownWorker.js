/*!-----------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 * Version: 7c44f3b480bb5d938a5b96d72f78f799cc5a24f7
 * Released under the MIT license
 * https://github.com/Microsoft/vscode/blob/master/LICENSE.txt
 *-----------------------------------------------------------*/
define("vs/languages/markdown/common/marked",["require","exports"],function(e,t){function r(e){return e}r.Renderer=function(){};var o={marked:r};return o});var __extends=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=this&&this.__decorate||function(e,t,r,o){if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)return Reflect.decorate(e,t,r,o);switch(arguments.length){case 2:return e.reduceRight(function(e,t){return t&&t(e)||e},t);case 3:return e.reduceRight(function(e,o){return void(o&&o(t,r))},void 0);case 4:return e.reduceRight(function(e,o){return o&&o(t,r,e)||e},o)}},__param=this&&this.__param||function(e,t){return function(r,o){t(r,o,e)}};define("vs/languages/markdown/common/markdownWorker",["require","exports","vs/base/common/winjs.base","vs/editor/common/modes/abstractModeWorker","vs/base/common/uri","vs/base/common/types","vs/base/common/paths","vs/languages/markdown/common/marked","vs/editor/common/modes/modesRegistry","vs/editor/common/modes/textToHtmlTokenizer","vs/platform/platform","vs/base/common/platform","vs/editor/common/services/modeService","vs/editor/common/services/resourceService","vs/platform/markers/common/markers"],function(e,t,r,o,n,s,i,a,c,m,l,h,u,d,b){var f;!function(e){e[e.LIGHT=0]="LIGHT",e[e.DARK=1]="DARK",e[e.HC_BLACK=2]="HC_BLACK"}(f||(f={}));var v=function(e){function t(t,r,o,n,s){e.call(this,t,r,o,n),this.theme=f.DARK,this.modeService=s}return __extends(t,e),t.prototype._doConfigure=function(e){return e&&e.theme&&(this.theme="vs-dark"===e.theme?f.DARK:"vs"===e.theme?f.LIGHT:f.HC_BLACK),e&&s.isArray(e.styles)&&(this.cssLinks=e.styles),r.TPromise.as(!1)},t.prototype.getEmitOutput=function(e,o){var n=this,s=this.resourceService.get(e),i=this.cssLinks||[],u=new a.marked.Renderer,d=this;u.image=function(t,r,o){var n='<img src="'+d.fixHref(e,t)+'" alt="'+o+'"';return r&&(n+=' title="'+r+'"'),n+=this.options&&this.options.xhtml?"/>":">"};var b=u.link;u.link=function(e,t,r){var o=b.call(this,e,t,r);return o=e&&"#"===e[0]?o.replace("href=","localhref="):o.replace("<a",'<a target="_blank"')};var v=this.modeService,k=function(e,r,o){var n=l.Registry.as(c.Extensions.EditorModes),s=n.getModeIdForLanguageName(r)||r||t.DEFAULT_MODE;v.getOrCreateMode(s).then(function(t){o(null,m.tokenizeToString(e,t))})};return new r.Promise(function(r,c){a.marked(s.getValue(),{gfm:!0,renderer:u,highlight:k},function(s,a){var c=["<!DOCTYPE html>","<html>","<head>",'<meta http-equiv="Content-type" content="text/html;charset=UTF-8">',0===i.length?'<link rel="stylesheet" href="'+o+'/markdown.css" type="text/css" media="screen">':"",0===i.length?'<link rel="stylesheet" href="'+o+'/tokens.css" type="text/css" media="screen">':"",n.theme===f.LIGHT?t.LIGHT_SCROLLBAR_CSS:n.theme===f.DARK?t.DARK_SCROLLBAR_CSS:t.HC_BLACK_SCROLLBAR_CSS,i.map(function(t){return'<link rel="stylesheet" href="'+n.fixHref(e,t)+'" type="text/css" media="screen">'}).join("\n"),"</head>",h.isMacintosh?'<body class="mac">':"<body>"].join("\n"),m=[n.theme===f.LIGHT?'<div class="monaco-editor vs">':n.theme===f.DARK?'<div class="monaco-editor vs-dark">':'<div class="monaco-editor hc-black">',a,"</div>"].join("\n"),l=["</body>","</html>"].join("\n");r({head:c,body:m,tail:l})})})},t.prototype.fixHref=function(e,t){return t?n["default"].parse(t).scheme?t:n["default"].file(i.join(i.dirname(e.fsPath),t)).toString():t},t.DEFAULT_MODE="text/plain",t.LIGHT_SCROLLBAR_CSS=['<style type="text/css">',"	::-webkit-scrollbar {","		width: 14px;","		height: 14px;","	}","","	::-webkit-scrollbar-thumb {","		background-color: rgba(100, 100, 100, 0.4);","	}","","	::-webkit-scrollbar-thumb:hover {","		background-color: rgba(100, 100, 100, 0.7);","	}","","	::-webkit-scrollbar-thumb:active {","		background-color: rgba(0, 0, 0, 0.6);","	}","</style>"].join("\n"),t.DARK_SCROLLBAR_CSS=['<style type="text/css">',"	::-webkit-scrollbar {","		width: 14px;","		height: 14px;","	}","","	::-webkit-scrollbar-thumb {","		background-color: rgba(121, 121, 121, 0.4);","	}","","	::-webkit-scrollbar-thumb:hover {","		background-color: rgba(100, 100, 100, 0.7);","	}","","	::-webkit-scrollbar-thumb:active {","		background-color: rgba(85, 85, 85, 0.8);","	}","</style>"].join("\n"),t.HC_BLACK_SCROLLBAR_CSS=['<style type="text/css">',"	::-webkit-scrollbar {","		width: 14px;","		height: 14px;","	}","","	::-webkit-scrollbar-thumb {","		background-color: rgba(111, 195, 223, 0.3);","	}","","	::-webkit-scrollbar-thumb:hover {","		background-color: rgba(111, 195, 223, 0.4);","	}","","	::-webkit-scrollbar-thumb:active {","		background-color: rgba(111, 195, 223, 0.4);","	}","</style>"].join("\n"),t=__decorate([__param(2,d.IResourceService),__param(3,b.IMarkerService),__param(4,u.IModeService)],t)}(o.AbstractModeWorker);t.MarkdownWorker=v});
//# sourceMappingURL=markdownWorker.js.map
